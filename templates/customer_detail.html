{% extends "base.html" %}
{% block content %}
<div class="page-head">
  <div>
    <h1>{{ customer.name }}</h1>
    <p>{{ customer.phone }}</p>
  </div>
  <a class="btn ghost" href="{{ url_for('customers') }}">Back to customers</a>
</div>

<section class="card">
  <h3>Edit customer</h3>
  <form class="stack" method="post">
    <div class="grid two">
      <label>
        Name
        <input type="text" name="name" value="{{ customer.name }}" required />
      </label>
      <label>
        Phone
        <input type="text" name="phone" value="{{ customer.phone }}" required />
      </label>
    </div>
    <div class="actions">
      <button class="btn primary" type="submit">Save</button>
    </div>
  </form>
</section>

<section class="card">
  <h3>Order history</h3>
  {% if orders %}
  <div class="table-wrap has-filters" style="--table-cols: 0.8fr 1fr 1fr 0.6fr;">
    <div class="table-filters">
      <input type="text" placeholder="Filter order" />
      <input type="text" placeholder="Filter status" />
      <input type="text" placeholder="Filter due" />
      <div class="filter-spacer"></div>
    </div>
    <div class="table">
      <div class="table-row table-head">
        <div>Order</div>
        <div>Status</div>
        <div>Due</div>
        <div></div>
      </div>
      {% for order in orders %}
      <div class="table-row">
        <div>#{{ order.id }}</div>
        <div><span class="tag">{{ order.status }}</span></div>
        <div>{{ order.due_date or "Not set" }}</div>
        <div><a class="link" href="{{ url_for('order_detail', order_id=order.id) }}">Open</a></div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% else %}
  <p class="muted">No orders yet.</p>
  {% endif %}
</section>
{% endblock %}
