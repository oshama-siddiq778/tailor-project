{% extends "base.html" %}
{% block content %}
<div class="page-head">
  <div>
    <h1>Orders</h1>
    <p>Track order status, due dates, and assignments.</p>
  </div>
  <a class="btn primary" href="{{ url_for('order_new') }}">+ New Order</a>
</div>

<div class="filters">
  <a class="chip {{ 'active' if not status else '' }}" href="{{ url_for('orders') }}">All</a>
  <a class="chip {{ 'active' if status == 'Pending' else '' }}" href="{{ url_for('orders', status='Pending') }}">Pending</a>
  <a class="chip {{ 'active' if status == 'In progress' else '' }}" href="{{ url_for('orders', status='In progress') }}">In progress</a>
  <a class="chip {{ 'active' if status == 'Ready' else '' }}" href="{{ url_for('orders', status='Ready') }}">Ready</a>
  <a class="chip {{ 'active' if status == 'Completed' else '' }}" href="{{ url_for('orders', status='Completed') }}">Completed</a>
</div>

<section class="card">
  {% if orders %}
  <div class="table-wrap has-filters" style="--table-cols: 0.7fr 1.2fr 1fr 1fr 1fr 1.2fr 0.6fr;">
    <div class="table-filters">
      <input type="text" placeholder="Filter order" />
      <input type="text" placeholder="Filter name" />
      <input type="text" placeholder="Filter phone" />
      <input type="text" placeholder="Filter status" />
      <input type="text" placeholder="Filter due" />
      <input type="text" placeholder="Filter assigned" />
      <div class="filter-spacer"></div>
    </div>
    <div class="table">
      <div class="table-row table-head">
        <div>Order</div>
        <div>Customer name</div>
        <div>Phone</div>
        <div>Status</div>
        <div>Due</div>
        <div>Assigned</div>
        <div></div>
      </div>
      {% for order in orders %}
      <div class="table-row">
        <div>#{{ order.id }}</div>
        <div><strong>{{ order.name }}</strong></div>
        <div class="muted">{{ order.phone }}</div>
        <div><span class="tag">{{ order.status }}</span></div>
        <div>{{ order.due_date or "Not set" }}</div>
        <div>{{ order.assigned_tailor or "Unassigned" }}</div>
        <div><a class="link" href="{{ url_for('order_detail', order_id=order.id) }}">Open</a></div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% else %}
  <p class="muted">No orders found.</p>
  {% endif %}
</section>
{% endblock %}
